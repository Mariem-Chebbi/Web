{% extends 'base_back.html.twig' %}
{% block body %}
<style>
    button {
        background-color: #1ab394;
        border-color: #1ab394;
        color: #FFFFFF;
        padding: 5px 10px;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.5;
        border-radius: 3px;
    }
    table {
   border: 1px dashed #ccc;
  border-collapse: collapse;
    }
    table td, table th {
  border: 1px dashed #ccc;
  padding: 10px;
  text-align: center;
}
    
</style>






<li>
                        <a href="{{path('app_addUser')}}"><i class="fa fa-diamond"></i> <span class="nav-label">Utilisateures</span></a>
                    </li>
                    
                    

                     <li>
                        <a href="#"><i class="fa fa-shopping-cart"></i> <span class="nav-label">Blogs</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                        <li><a href="{{path('app_addBlog')}}">Blogs </a></li>
                            <li><a href="{{path('app_addCategorie')}}">Categorie</a></li>
                            </ul>
                    </li>

                    <li>
                        <a href="#"><i class="fa fa-diamond"></i> <span class="nav-label">Formations/Certifs</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                        <li><a href="{{path('app_addFormation')}}">Formations </a></li>
                            <li><a href="{{path('app_addCertification')}}">Certifications</a></li>
                            </ul>
                    </li>

                    <li class="active">
                        <a href="#"><i class="fa fa-shopping-cart"></i> <span class="nav-label">Produits/Reservations</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                        <li class="active"><a href="{{path('app_addProduct')}}">Produits </a></li>
                            <li><a href="{{path('app_addReservation')}}">Reservations</a></li>
                            </ul>
                    </li>

                    <li>
                        <a href="#"><i class="fa fa-shopping-cart"></i> <span class="nav-label">Centres/Services</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                        <li><a href="{{path('app_addCentre')}}">Centres </a></li>
                            <li><a href="{{path('app_addServices')}}">Services</a></li>
                            </ul>
                    </li>

                    <li>
                        <a href="#"><i class="fa fa-diamond"></i> <span class="nav-label">Evenements</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                        <li><a href="{{path('app_evenement_index')}}">Evenements </a></li>
                            <li><a href="{{path('app_sponsor_index')}}">Sponsers</a></li>
                            </ul>
                    </li>

                </ul>

            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" action="search_results.html">
                <div class="form-group">
                    <input type="text" placeholder="Rechercher..." class="form-control" name="top-search" id="top-search">
                </div>
            </form>
        </div>
            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">Bienvenue dans Edusex Admin Dashboard</span>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li class="divider"></li>
                        <li>
                            <div class="text-center link-block">
                                <a href="mailbox.html">
                                    <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                                </a>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">     
                    </ul>
                </li>
                <li>
                    <a href="login.html">
                        <i class="fa fa-sign-out"></i> DÃ©connecter
                    </a>
                </li>
                <li>
                    <a class="right-sidebar-toggle">
                        <i class="fa fa-tasks"></i>
                    </a>
                </li>
            </ul>
        </nav>
        </div>
        {% for message in app.flashes('success') %}
                         <div class="alert alert-success">
                             {{ message }}
                        </div>
                    {% endfor %}
                <div class="row  border-bottom white-bg dashboard-header"> 




















<div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h3>Les produits </h3>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#">Config option 1</a>
                                </li>
                                <li><a href="#">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-sm-5 b-r"><h3 class="m-t-none m-b">ajouter un produit</h3>
                                <br>

                                {{ form_start(formClass,{'attr': {'novalidate': 'novalidate'}}) }}
                                        {{ form_label(formClass.libelle) }}
                                        <br>
                                        {{ form_widget(formClass.libelle) }}
                                         {{ form_errors(formClass.libelle,{'attr':{'class':'text-danger'}}) }}
                                        <br>
                                        <br>
                                
                                        {{ form_label(formClass.description) }}
                                        <br>
                                        {{ form_widget(formClass.description) }}
                                         {{ form_errors(formClass.description,{'attr':{'class':'text-danger'}}) }}
                                        <br>
                                        <br>

                                        {{ form_label(formClass.quantite) }}
                                        <br>
                                        {{ form_widget(formClass.quantite) }}
                                         {{ form_errors(formClass.quantite,{'attr':{'class':'text-danger'}}) }}
                                        <br>
                                        <br>
                                        
                                        {{ form_label(formClass.image) }}
                                        <br>
                                        {{ form_widget(formClass.image) }}
                                         {{ form_errors(formClass.image,{'attr':{'class':'text-danger'}}) }}
                                        <br>
                                        <br>

                                    {{ form_end(formClass) }}
                            </div>
                            <div class="col-sm-7"><h3>List des produits</h3><br>
                                

                                <form id="search-form"  action ="{{path('app_addProduct')}}" >
     <input type="text" placeholder="Chercher un Produit..." name ="q" id="search-input" style="width: 100%;" >
    </form><br><br>
    {# <button type="submit">Rechercher</button> </form> #}
                                
                                <table id="product-table">
                                    <tr>
                                    <th>  Id  </th>
                                    <th>  libelle  </th>
                                    <th>  description </th>
                                    <th>  quantite </th>
                                    <th>  image  </th>
                                    <th>  action  </th>
                                    </tr>
                                    <tr>
                                    <tbody id="table-body">
                                    {% for i in Product %}
                                        <td>{{i.id}}</td>
                                        <td>{{i.libelle}}</td>
                                        <td>{{i.description}}</td>
                                        <td>{{i.quantite}}</td>
                                        <td><img src= "{{ asset('images/' ~ i.image) }}" style="width: 50px; height: auto;" /></td>
                                        <td>
                                            <a href="{{path('supprimerP',{'id':i.id}) }}" class="btn btn-danger" style="width: 100%;">Supprimer</a><br>
                                            <a href="{{path('updatP',{'id':i.id}) }}" class="btn btn-warning" style="width: 100%;">modifier</a></td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                <tbody id="table-body-search">
                                
                                </tbody>

                                </table>
                                {{ knp_pagination_render(Product) }}
                                <a href="{{path('app_pdfProduct') }}" class="btn btn-white" style="width: 100%;">Exporter PDF</a>
                            </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                

















{# <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> #}
    {# <script>
         let release = null;
        $("#search").keyup(function (e) {
            $("#table-body").hide();
            $("#table-body-search").show();
            clearInterval(release);
            release = setInterval(function () {
                let value = $("#search").val();
                if (value !== "") {
                    $.ajax({
                        type: 'GET',
                        url: "/user/recherche/by-email",
                        data: {
                            'search-value': value
                        },
                        success: function (users) {
                            if (users) {
                                $("#table-body-search").empty()
                                if (users.length) {
                                    $.each(users, function (i, user) {
                                            $("#table-body-search").append(
                                                "<tr>" +
                                                "   <td>" + user.id + "</td>" +
                                                "   <td>" + user.email + "</td>" +
                                                "   <td>" + user.roles + "</td>" +
                                                "   <td>" + user.nom + "</td>" +
                                                "   <td>" + user.prenom + "</td>" +
                                                "   <td>" + user.numTel + "</td>" +
                                                "   <td>" + user.ville + "</td>" +
                                                "   <td>" + user.DateNaissance + "</td>"+
                                                "   <td>" +
                                                "       <a href='' class='btn btn-primary w-100'>Afficher</a>" +
                                                "       <form method='post' action='' onsubmit='' class=''>" +//return confirm('Are you sure you want to delete this item?');
                                                "           <button class='btn btn-danger w-100 mt-3'>Supprimer</button>" +
                                                "       </form>" +
                                                "   </td>" +
                                                "</tr>"
                                            );
                                        }
                                    )
                                } else {
                                    $("#contenu-recherche").append(
                                        "<tr>" +
                                        "   <td colspan='9'>no records found</td>" +
                                        " </tr>"
                                    )
                                }
                            } else {
                                $("#contenaire-revues-for-search").show();
                                $("#contenu-revues-recherche").empty().append(
                                    "   <div class='section py-3'>" +
                                    "       <div class='text-center my-5'>" +
                                    "           <p class='font-weight-light'>Aucun resultat</p>" +
                                    "       </div>" +
                                    "   </div>"
                                );
                            }
                        }
                    });
                } else {
                    $("#table-body-search").empty().hide()
                    $("#table-body").show();
                }
                clearInterval(release)
            }, 500);
            return false;
        });
   
    </script> #}













                {% endblock %}